<!doctype html>
<head>
  <title>Generating Guitar Chord Diagrams | Boris Smus</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width">
  <meta name="description" content="

One day I wanted to add a feature to [Guitar Unleashed][] which exists
in some of the better guitar tab sites.">

  <!-- Icons -->
  <link rel="icon" type="image/x-icon" href="/static/icons/favicon.ico" />
  <link rel="apple-touch-icon" href="/static/icons/apple-touch-icon.png">

  <!-- Styles -->
  <link href='http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz:700|PT+Sans|Inconsolata' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/static/stylesheets/screen.css" type="text/css" media="screen" charset="utf-8">

  <!-- Feed -->
  <link href="http://feeds.feedburner.com/smuscom" rel="alternate" title="Boris Smus" type="application/atom+xml"/>
</head>
<body>
  <header>
    <span class="left">
      <a href="/" class="name">Boris Smus</a>
    </span>
    <span class="right">
      <a href="/projects/">Projects</a>
      <a href="/about/">About</a>
      <a href="/archive/posts/">Archives</a>
    </span>
  </header>

  <div id="main">
    <section id="articles">
      
<article>
  <h1><a href="/generating-guitar-chord-diagrams">Generating Guitar Chord Diagrams</a></h1>
  <div class="subtitle">
  
  <time>Published on 14 June 2009</time>
  
  
  </div>
  <p>
    <p>One day I wanted to add a feature to <a href="http://www.guitarunleashed.com">Guitar Unleashed</a> which exists
in some of the better guitar tab sites. When a user hovers over a chord,
they are shown a diagram representing the guitar fret with overlaid
finger positions required to produce this chord. Many of the most
popular sites do this by showing a crude, plain-text representation of
the chord.</p>

<p>For example, a C chord is shown as follows:</p>

<pre><code>e ---|---|---|---|---|
B -x-|---|---|---|---|
G ---|---|---|---|---|
D ---|-x-|---|---|---|
A ---|---|-x-|---|---|
E ---|---|-o-|---|---|
</code></pre>

<p>Typeset guitar chord representation looks very different. Two most
popular variants of the C chord would appear above the staff with small
symbols that look something like this: </p>

<p><img src="C.png" alt="C" title="C" />
<img src="C_1.png" alt="C_1" title="C_1" /> </p>

<p>Such images have many benefits as compared to the plain text version:</p>

<ul>
<li>Convention: many guitar players are used to learning from sheet
music, so this chord notation is familiar to them.</li>
<li>Readability: the image representation is more compact and more
pleasant to read.</li>
<li>Completeness: the image version has an easy way to display barre
chords and specify fingerings (not pictured)</li>
</ul>

<p>True to Guitar Unleashed's mission of being a truly usable guitar chords
site, I decided to display typeset fret diagrams. For the
implementation, a program would pre-generate images on the server based
on the encoded chord shape and then serve these images dynamically via
JavaScript. Unfortunately, I found no software to generate such images
for all popular chords, so I ended up developing my own. </p>

<p>From some brief
research, I decided that <a href="http://lilypond.org/doc/v2.9/Documentation/user/lilypond/Fret-diagrams">lilypond fret diagrams</a> are the most elegant
way of creating such images. The alternative was to use <a href="http://www.aei.mpg.de/~peekas/gchords/">GCHORDS</a>
whose output I liked less, and which required depending on TeX.
Typically lilypond typesets an entire piece of sheet music on a staff,
with clefs, key signatures, etc. After discovering a really great
<a href="http://netcetera.org/cgi-bin/tmbundles.cgi#Lilypond">lilypond bundle for textmate</a>, I managed to get rid of these
unnecessary features and display just a fret diagram. The following
python-parametrized lilypond template does the trick:</p>

<pre><code>\include "lilypond-book-preamble.ly"
\version "2.10.0"
\markup
\fret-diagram-terse #"%(chord_markup)s"
</code></pre>

<p>Then, using lilypond's fret diagram encoding, a python script replaces
<code>%(chord_markup)s</code> with the desired markup. Lilypond's markup is very
terse but mostly manageable. Sample markup for a C chord looks like
this: <code>x;3;2;o;1;o;</code>, while the barre version looks a little bit more
bizarre, like this: <code>3-(;3;5;5;5;3-);</code>. </p>

<p>My python program contains a list of chord shapes for the most popular chords,
encoded in the manner above, then outputs images for each chord and variant
into a directory.  I've made it <a href="chord-image-generator.zip">available for download</a>, in case your next
project needs generated fret diagrams with a highly customizable look. You can
also see the diagrams live at <a href="http://www.guitarunleashed.com">guitarunleashed.com</a>.</p>

  </p>

  <!--
  DISABLED COMMENTS.

  <div id="disqus_thread"></div>
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'smus'; // Required - Replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
  -->
</article>

    </section>
    <aside>
      <img src="/static/images/me.jpg" alt="Headshot of Author" title="Headshot of Author">
      <p>
        I'm Boris Smus, a software engineer and UI prototyper from
        Vancouver, Canada. I currently live in San Francisco and work on
        Chrome related things.
        <a href="/about/" class="readmore"></a>
      </p>
    </aside>
  </div>

  <div id="push"></div>

  <footer>
    <p>
      &copy; 2008 - 2015 Boris Smus<br>
      Powered by <a href="/site/">Lightning</a>
    </p>

    <ul id="social-links">
      <a href="http://feeds.feedburner.com/smuscom" class="social rss" title="RSS" rel="external me">RSS</a>
      <a href="https://github.com/borismus" class="social github" title="GitHub" rel="external me">GitHub</a>
      <a href="https://profiles.google.com/boris.smus" rel="author" class="social plus" title="Google Plus" rel="external me">Google Plus</a>
      <a href="https://twitter.com/borismus" class="social twitter" title="Twitter" rel="external me">Twitter</a>
    </ul>
  </footer>


  <script src="/static/javascripts/highlight.pack.js"></script>
  <script>
    // Syntax highlighting for code.
    hljs.tabReplace = '  ';
    hljs.initHighlightingOnLoad();
  </script>
  <script>
    // Google Analytics.
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-17930798-22', 'smus.com');
    ga('require', 'displayfeatures');
    ga('send', 'pageview');
  </script>
  <script src="//cdn.webglstats.com/stat.js" defer="defer" async="async"></script>
  <script src="/lightning_error.js"></script>
</body>