<!doctype html>
<head>
  <title>Musical Mashups in Pure JavaScript | Boris Smus</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width">
  <meta name="description" content="

When I want to learn a new song on guitar, I often search for chords
online.">

  <!-- Icons -->
  <link rel="icon" type="image/x-icon" href="/static/icons/favicon.ico" />
  <link rel="apple-touch-icon" href="/static/icons/apple-touch-icon.png">

  <!-- Styles -->
  <link href='http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz:700|PT+Sans|Inconsolata' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/static/stylesheets/screen.css" type="text/css" media="screen" charset="utf-8">

  <!-- Feed -->
  <link href="http://feeds.feedburner.com/smuscom" rel="alternate" title="Boris Smus" type="application/atom+xml"/>
</head>
<body>
  <header>
    <span class="left">
      <a href="/" class="name">Boris Smus</a>
    </span>
    <span class="right">
      <a href="/projects/">Projects</a>
      <a href="/about/">About</a>
      <a href="/archive/posts/">Archives</a>
    </span>
  </header>

  <div id="main">
    <section id="articles">
      
<article>
  <h1><a href="/mashups-in-pure-js">Musical Mashups in Pure JavaScript</a></h1>
  <div class="subtitle">
  
  <time>Published on 04 December 2008</time>
  
  
  </div>
  <p>
    <p>When I want to learn a new song on guitar, I often search for chords
online. There are many sites that provide chords and tabs, and Google
indexes them nicely. But the quality of chords is often poor, and
there's no way to submit corrections. When I ran a MoinMoin wiki, I kept
my fixed versions of songs there. Even making modifications to existing
chords was painful though, since it involved hand-editing a plain text
file and ensuring that the chords were properly aligned with the lyrics.
My preferred solution to this problem is to write a web application to
facilitate easy collaborative editing of simple folk/rock/pop songs. </p>

<p>I started working on a proof-of-concept prototype. To begin with, I wanted
an easy way of finding song lyrics, which provide the skeleton for most
guitar pieces that I'm interested in. Later, I planned to work on
annotating those lyrics. As I prepared to whip up a light django
application to scrape lyrics sites, I realized that there may be a
simpler way: if I found a friendly lyrics API, there would be no need to
write any server side code. Could the entire service be written in
Javascript? </p>

<p>LyricWiki.org had exactly what I need: a simple way to
access <a href="http://lyricwiki.org/api.php?artist=Slipknot&amp;song=Before_I_Forget&amp;fmt=json">lyrics in JSON</a> format. Of course, you can't just do an
XmlHttpRequest to lyricswiki.org because of XSS security restrictions.
Instead, you <em>can</em> work around this cross-domain scripting issue by
writing out <script\&gt; tags, and specifying the script src dynamically.
Luckily, the LyricWiki JSON is wrapped (padded) in a variable named
'song'. As I later discovered, this practice of wrapping JSON in a
variable is well established, and called <a href="http://en.wikipedia.org/wiki/JSONP">JSONP</a>. This technique makes
it easy to simply evaluate the script tag, and wait for the song
variable to change. Now If only there was a safe way of doing this sort
of cross-domain scripting without introducing a <a href="http://personalized20.blogspot.com/2006/02/jsonp-service-and-security.html">host</a> of <a href="http://unclehulka.com/ryan/blog/archives/2005/12/12/jsonpyoure-joking-right/">XSS</a>
<a href="http://www.west-wind.com/Weblog/posts/107136.aspx">vulnerabilities</a>, writing mashups would be a walk in the park! </p>

<p>After only two hours of hacking around, including learning jQuery, I came up
with a <a href="lyricwiki">little demo application</a>, written in pure Javascript. Hooray for
jQuery, humanmsg, and the LyricsWiki API!</p>

  </p>

  <!--
  DISABLED COMMENTS.

  <div id="disqus_thread"></div>
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'smus'; // Required - Replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
  -->
</article>

    </section>
    <aside>
      <img src="/static/images/me.jpg" alt="Headshot of Author" title="Headshot of Author">
      <p>
        I'm Boris Smus, a software engineer and UI prototyper from
        Vancouver, Canada. I currently live in San Francisco and work on
        Chrome related things.
        <a href="/about/" class="readmore"></a>
      </p>
    </aside>
  </div>

  <div id="push"></div>

  <footer>
    <p>
      &copy; 2008 - 2015 Boris Smus<br>
      Powered by <a href="/site/">Lightning</a>
    </p>

    <ul id="social-links">
      <a href="http://feeds.feedburner.com/smuscom" class="social rss" title="RSS" rel="external me">RSS</a>
      <a href="https://github.com/borismus" class="social github" title="GitHub" rel="external me">GitHub</a>
      <a href="https://profiles.google.com/boris.smus" rel="author" class="social plus" title="Google Plus" rel="external me">Google Plus</a>
      <a href="https://twitter.com/borismus" class="social twitter" title="Twitter" rel="external me">Twitter</a>
    </ul>
  </footer>


  <script src="/static/javascripts/highlight.pack.js"></script>
  <script>
    // Syntax highlighting for code.
    hljs.tabReplace = '  ';
    hljs.initHighlightingOnLoad();
  </script>
  <script>
    // Google Analytics.
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-17930798-22', 'smus.com');
    ga('require', 'displayfeatures');
    ga('send', 'pageview');
  </script>
  <script src="//cdn.webglstats.com/stat.js" defer="defer" async="async"></script>
  <script src="/lightning_error.js"></script>
</body>